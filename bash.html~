<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Euler1 by gdm9000</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="wrapper">
	<div w3-include-html="content.html"></div> 
      <header>
        <h1>Euler1</h1>
        <p></p>

        <p class="view"><a href="https://github.com/gdm9000/euler1">View the Project on GitHub <small>gdm9000/euler1</small></a></p>

        <ul>
          <li><a href="https://github.com/gdm9000/euler1/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/gdm9000/euler1/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/gdm9000/euler1">View On <strong>GitHub</strong></a></li>
        </ul>
      
	<p>
	  <a href='index.html'>Home</a><br></br>
	  <a href='ada.html'>Ada</a><br></br>
	  <a href='algol.html'>Algol 68</a><br></br>
	  <a href='awk.html'>Awk</a><br></br>
	  <a href='bash.html'>Bash</a><br></br>
	  <a href='basic.html'>Basic</a><br></br>
	  <a href='bc.html'>bc</a><br></br>
	  <a href='boo.html'>Boo</a><br></br>
	</p>
      </header>
      <section>
        <h3>
<a id="welcome-to-euler-1" class="anchor" href="#welcome-to-euler-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bash</h3>

<p>
I am just beginning to learn <a title="Linux" href="http://en.wikipedia.org/wiki/Linux">Linux</a>, and so for <a title="Euler1" href="http://projecteuler.net/problem=1">Euler1</a>, I've tried my hand at <a href="http://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a>. This shell debuted in 1989. Here is my first attempt:
</p>
<pre style="background:rgba(238,238,238,0.92);color:#000;"><span style="color:#06f;font-style:italic;">#!/bin/bash</span>
<span style="color:#06f;font-style:italic;">#Euler1 in Bash</span>

<span style="color:#ff8000;">euler1</span>() {
    retval=0

    <span style="color:#00f;">for</span> i <span style="color:#00f;">in</span> <span style="color:#093;">$(seq $1)</span><span style="color:#00f;">;</span> <span style="color:#00f;">do</span>
        <span style="color:#00f;">if</span> [ $[$i%3] -eq 0 ]  <span style="color:#00f;">|</span><span style="color:#00f;">|</span>  [ $[$i%5] -eq 0 ]<span style="color:#00f;">;</span> <span style="color:#00f;">then</span>
            retval=$[ $retval+$i ]
        <span style="color:#00f;">fi</span>
    <span style="color:#00f;">done</span>

    <span style="color:#33f;font-weight:bold;">echo</span> $retval
}

<span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">$(euler1 999)</span></pre>
<p>
It only took me a couple of hours to bang out this version of Euler1 upon first playing with bash. At first glance, I was horrified by how clunky much of the syntax is - it feels like it has to jump through contextual hoops to get anything done. For example, integers are often passed into another context as string values and then have to be recast back as integer types to continue. And both whitespace and sigils are mandated.
</p>
<p>
Check out how a value is returned from a function. You have to toss it to STDIO, where it gets caught like an exception by the calling routine and then consumed. Notice above, that there are two ECHO statements but only one value is displayed in the console output. This is because bash doesn't allow functions to return values to the caller. Instead, just like an OS process, a bash function returns a value to STDIO on exit using <em>echo</em>. The calling routine then yanks it from STDIO also using <em>echo</em>.
</p>
<p>
Here’s another version using a <a title="Quicksort" href="http://en.wikipedia.org/wiki/Quicksort">Quicksort</a>-based algorithm. Here we recursively break the list up in half and then reassemble it. Instead of sorting each half, though, we’ll filter the pivot value, converting it to 0 if it’s not divisible. Here, e<em>uler1 </em>returns e<em>uler1</em> calculated on the half of the list before the pivot element, e<em>uler1</em> calculated on the half of the list after the pivot element, and the pivot element or 0, all added together. It took me approximately 8 hours to write it:
</p>
<pre style="background:rgba(238,238,238,0.92);color:#000;"><span style="color:#06f;font-style:italic;">#!/bin/bash</span>
<span style="color:#06f;font-style:italic;"># Euler1 in Bash</span>

<span style="color:#ff8000;">euler1</span>() {
    <span style="color:#06f;font-style:italic;"># if the list is empty, return 0</span>
    <span style="color:#00f;">if</span> [ $# -le 0 ]<span style="color:#00f;">;</span> <span style="color:#00f;">then</span>
        <span style="color:#33f;font-weight:bold;">echo</span> 0

    <span style="color:#00f;">else</span>
        <span style="color:#06f;font-style:italic;">#get the index position of the list's middle element</span>
        pivot=<span style="color:#093;">(( ($#<span style="color:#00f;">-</span><span style="color:#06f;">1</span>) <span style="color:#00f;">/</span> <span style="color:#06f;">2</span> <span style="color:#00f;">+</span> <span style="color:#06f;">1</span> ))</span>

        <span style="color:#06f;font-style:italic;">#calculate a value for the middle element</span>
        thisVal=${<span style="color:#00f;">!</span>pivot}
        <span style="color:#00f;">if</span> [ $[$thisVal%3] -gt 0 ] <span style="color:#00f;">&amp;&amp;</span> [ $[$thisVal%5] -gt 0 ]<span style="color:#00f;">;</span> <span style="color:#00f;">then</span>
            thisVal=0
        <span style="color:#00f;">fi</span>

        <span style="color:#06f;font-style:italic;">#recursively process the half of the list below the middle element</span>
        pre=<span style="color:#093;">`euler1 ${<span style="color:#00f;">@</span><span style="color:#00f;">:</span>1<span style="color:#00f;">:</span>(($pivot-1))}`</span>
        <span style="color:#06f;font-style:italic;">#recursively process the half of the list above the middle element</span>
        post=<span style="color:#093;">`euler1 ${<span style="color:#00f;">@</span><span style="color:#00f;">:</span>(($pivot+1))}`</span>

        <span style="color:#06f;font-style:italic;">#return thisVal + the results from the first and last halves</span>
        <span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">$(( $thisVal <span style="color:#00f;">+</span> $pre <span style="color:#00f;">+</span> $post ))</span>
    <span style="color:#00f;">fi</span>
}

<span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">$( euler1 <span style="color:#093;">`seq 1 999`</span> )</span></pre>
<p>
Of note is how recursive calls are made, and how an arbitrarily long list of parameters are passed. Also of note is all the strange sigils and punctuation, which, I'll be honest, I still haven't wrapped my head around. The runtime seems to be very anal about whitespace and punctuation, and the rules seem to be quite arbitrary. This language is quite capable, but I am not a fan of its syntax.
</p>
<p>
I tried running the same code on a Bash shell in <a title="cygwin" href="http://www.cygwin.com/">Cygwin</a>, but it wouldn't work - I think the shell was an older version. I actually had to make extensive changes to get this to work, including replacing the implicit passed-in variable with an explicitly declared one, different array access notation, and the way the recursive calls are made:
</p>
<!-- HTML generated using hilite.me -->
<pre style="background:rgba(238,238,238,0.92);color:#000;"><span style="color:#06f;font-style:italic;">#!/bin/bash</span>
<span style="color:#06f;font-style:italic;">#Euler1 in bash</span>

<span style="color:#ff8000;">euler1</span>() {
    ints=(<span style="color:#093;">"$@"</span>)

    <span style="color:#06f;font-style:italic;"># if the list is empty, return 0</span>
    len=${<span style="color:#00f;">#</span>ints[@]}
    <span style="color:#00f;">if</span> [ $len -le 0 ]<span style="color:#00f;">;</span> <span style="color:#00f;">then</span>
        <span style="color:#33f;font-weight:bold;">echo</span> 0

    <span style="color:#00f;">else</span>
        <span style="color:#06f;font-style:italic;">#get the index position of the list</span>
        pivot=$[ ($len-1)/2 ]

        thisVal=${ints[$pivot]}
        <span style="color:#00f;">if</span> [ $[$thisVal%3] -gt 0 ] <span style="color:#00f;">&amp;&amp;</span> [ $[$thisVal%5] -gt 0 ]<span style="color:#00f;">;</span> <span style="color:#00f;">then</span>
            thisVal=0
        <span style="color:#00f;">fi</span>

        <span style="color:#06f;font-style:italic;">#recursively process the half of the list below the middle element</span>
        intsPre=${ints[@]<span style="color:#00f;">:</span>0<span style="color:#00f;">:</span>(($pivot))}
        pre=<span style="color:#093;">$( euler1 $intsPre )</span>
        <span style="color:#06f;font-style:italic;">#recursively process the half of the list above the middle element</span>
        intsPost=${ints[@]<span style="color:#00f;">:</span>(($pivot)+1)}
        post=<span style="color:#093;">$( euler1 $intsPost )</span>

        <span style="color:#33f;font-weight:bold;">echo</span> $[ $pre+$thisVal+$post ]
    <span style="color:#00f;">fi</span>
}

<span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">$( euler1 <span style="color:#093;">`seq 1 999`</span> )</span></pre>
<p>
Here’s one more – an elegant algorithm based on an observation by little Carl Friedrich Gauss – <a href="http://blog.smoothfriction.nl/archive/2011/01/23/powershell-fun-project-euler-1-gauss-being-smart.aspx">http://blog.smoothfriction.nl/archive/2011/01/23/powershell-fun-project-euler-1-gauss-being-smart.aspx</a>. It operates in <a title="Time complexity" href="http://en.wikipedia.org/wiki/Time_complexity">O(1) constant time</a>. Don’t sweat it if this seems inscrutable; click the blog link above for an explanation.
</p>
<pre style="background:rgba(238,238,238,0.92);color:#000;"><span style="color:#06f;font-style:italic;">#!/bin/bash</span>
<span style="color:#06f;font-style:italic;">#Euler1 in bash</span>

<span style="color:#ff8000;">mySum</span>() {
    <span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">"(($2/$1) * (($2/$1)+1) * $1 / 2)"</span>
}

<span style="color:#ff8000;">euler1</span>() {
    <span style="color:#33f;font-weight:bold;">echo</span> $[ <span style="color:#093;">$(mySum 3 $1)</span> + <span style="color:#093;">$(mySum 5 $1)</span> - <span style="color:#093;">$(mySum 15 $1)</span> ]
}

<span style="color:#33f;font-weight:bold;">echo</span> <span style="color:#093;">$(euler1 999)</span></pre>
<p>
Bash does ship with a couple of debuggers, which look very capable, but for some reason I didn't have a lot of luck with them. To run this code: there's a shebang, simply call your script.
</p>
<div style="background:black;overflow:auto;width:auto;color:white;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<pre style="line-height:125%;margin:0;background:black;border:0px;"><span style="color:#ffffff;">$</span> <span style="color:#ffffff;">./euler1.sh</span>
<span style="color:#0086f7;font-weight:bold;">233168</span></pre>
</div>
</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/gdm9000">gdm9000</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
