<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Euler1 by gdm9000</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="wrapper">
      <header>
        <h1>Euler1</h1>
        <p></p>

        <p class="view"><a href="https://github.com/gdm9000/euler1">View the Project on GitHub <small>gdm9000/euler1</small></a></p>

        <ul>
          <li><a href="https://github.com/gdm9000/euler1/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/gdm9000/euler1/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/gdm9000/euler1">View On <strong>GitHub</strong></a></li>
        </ul>
      
	<p>
	  <a href='index.html'>Home</a><br></br>
	  <a href='ada.html'>Ada</a><br></br>
	  <a href='algol.html'>Algol 68</a><br></br>
	  <a href='awk.html'>Awk</a><br></br>
	  <a href='bash.html'>Bash</a><br></br>
	  <a href='basic.html'>Basic</a><br></br>
	  <a href='bc.html'>bc</a><br></br>
	  <a href='boo.html'>Boo</a><br></br>
	</p>
      </header>
      <section>
        <h3>
<a id="welcome-to-euler-1" class="anchor" href="#welcome-to-euler-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>bc</h3>

<p>
<a title="BC" href="http://en.wikipedia.org/wiki/Bc_programming_language">bc</a>, introduced in 1975, is a calculator language for Unix. It's a simple <a title="Procedural" href="http://en.wikipedia.org/wiki/Procedural_programming">Procedural</a> language with syntax derived from <a title="C" href="http://gdm9000.wordpress.com/2011/10/18/c/">C</a> that allows you to script complex calculations. It's designed as a desktop calculator, not as a general-purpose language, so it's missing a lot of functionality such as objects, first-class functions, pointers - originally it didn't even have any IO routines. It is a <a title="TuringComplete" href="http://en.wikipedia.org/wiki/Turing_completeness">Turing-Complete</a> language though - just one that you won't want to write anything too complex in. bc has been modernized over the years, with GNU adding a print statement for scripting, rudimentary exception handling, etc.
</p>
<p>
Here's a version of Euler1 in bc - surprise, it looks much like C:
</p>

<div style="background:white;overflow:auto;width:auto;color:black;margin-bottom:20px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<pre style="margin:0;line-height:125%;"><span style="color:#009999;">#!/usr/bin/bc --quiet</span>
<span style="color:#0099ff;font-style:italic;">/* Euler1 in bc */</span>

define <span style="color:#cc00ff;">euler1</span>(size) {
    <span style="color:#006699;font-weight:bold;">auto</span> i, retval
    retval <span style="color:#555555;">=</span> <span style="color:#ff6600;">0</span>

    <span style="color:#006699;font-weight:bold;">for</span> (i <span style="color:#555555;">=</span> <span style="color:#ff6600;">1</span>; i <span style="color:#555555;">&lt;</span> size; i<span style="color:#555555;">++</span>) {
        <span style="color:#006699;font-weight:bold;">if</span> (i <span style="color:#555555;">%</span> <span style="color:#ff6600;">3</span> <span style="color:#555555;">==</span> <span style="color:#ff6600;">0</span> <span style="color:#555555;">||</span> i <span style="color:#555555;">%</span> <span style="color:#ff6600;">5</span> <span style="color:#555555;">==</span> <span style="color:#ff6600;">0</span>) { retval <span style="color:#555555;">+=</span> i }
    }
    <span style="color:#006699;font-weight:bold;">return</span> (retval)
}

print euler1(<span style="color:#ff6600;">1000</span>), <span style="color:#cc3300;">"</span><span style="color:#cc3300;font-weight:bold;">\n</span><span style="color:#cc3300;">"</span>
quit</pre>
</div>

<p></p>
<p>
Here's a functional version that uses <a title="TailRecursion" href="http://stackoverflow.com/questions/33923/what-is-tail-recursion">tail recursion</a> with an accumulator. One of the main points here is that the function <em>euler()</em> is <a title="Determinism" href="http://en.wikipedia.org/wiki/Deterministic_algorithm">deterministic</a> - it will always return the same output for a given input. This is accomplished in part by the absence of any variable manipulation - there are instead only functions which return values. The other main point is that this recursion uses tail call optimization - it's written in such a way that an intelligent compiler can optimize its stack usage to be O(n) instead of O(n!). In English, this means that your program will probably not crash even for hugely recursive calls.
</p>

<div style="background:white;overflow:auto;width:auto;margin-bottom:20px;color:black;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<pre style="margin:0;line-height:125%;"><span style="color:#009999;">#!/usr/bin/bc -q</span>
<span style="color:#0099ff;font-style:italic;">/* Euler1 in bc */</span>

define <span style="color:#cc00ff;">euler</span>(n, acc) {
    <span style="color:#006699;font-weight:bold;">if</span> (n <span style="color:#555555;">==</span> <span style="color:#ff6600;">1</span>) <span style="color:#006699;font-weight:bold;">return</span> acc

    <span style="color:#006699;font-weight:bold;">if</span> (n <span style="color:#555555;">%</span> <span style="color:#ff6600;">3</span> <span style="color:#555555;">==</span> <span style="color:#ff6600;">0</span> <span style="color:#555555;">||</span> n <span style="color:#555555;">%</span> <span style="color:#ff6600;">5</span> <span style="color:#555555;">==</span> <span style="color:#ff6600;">0</span>) {
        <span style="color:#006699;font-weight:bold;">return</span> euler(n<span style="color:#555555;">-</span><span style="color:#ff6600;">1</span>, acc<span style="color:#555555;">+</span>n);
    } <span style="color:#006699;font-weight:bold;">else</span> {
        <span style="color:#006699;font-weight:bold;">return</span> (euler(n<span style="color:#555555;">-</span><span style="color:#ff6600;">1</span>, acc));
    }
}

define <span style="color:#cc00ff;">euler1</span>(size) { <span style="color:#006699;font-weight:bold;">return</span> (euler(size,<span style="color:#ff6600;">0</span>)); }

print euler1(<span style="color:#ff6600;">999</span>), <span style="color:#cc3300;">"</span><span style="color:#cc3300;font-weight:bold;">\n</span><span style="color:#cc3300;">"</span>
quit</pre>
</div>

<p></p>
<p>
Here’s one more – an elegant algorithm based on an observation by little Carl Friedrich Gauss – <a href="http://blog.smoothfriction.nl/archive/2011/01/23/powershell-fun-project-euler-1-gauss-being-smart.aspx">http://blog.smoothfriction.nl/archive/2011/01/23/powershell-fun-project-euler-1-gauss-being-smart.aspx</a>. It operates in <a title="Time complexity" href="http://en.wikipedia.org/wiki/Time_complexity">O(1) constant time</a>. Don’t sweat it if this seems inscrutable; click the blog link above for an explanation.
<p>

<div style="background:white;overflow:auto;width:auto;color:black;margin-bottom:20px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<pre style="margin:0;line-height:125%;"><span style="color:#009999;">#!/usr/bin/bc -q</span>
<span style="color:#0099ff;font-style:italic;">/* Euler1 in bc */</span>

define <span style="color:#cc00ff;">my_sum</span>(n, size) {
    <span style="color:#006699;font-weight:bold;">return</span> (n <span style="color:#555555;">*</span> (((size<span style="color:#555555;">/</span>n)<span style="color:#555555;">^</span><span style="color:#ff6600;">2</span> <span style="color:#555555;">+</span> (size<span style="color:#555555;">/</span>n)) <span style="color:#555555;">/</span> <span style="color:#ff6600;">2</span>))
}

define <span style="color:#cc00ff;">euler1</span>(size) {
    <span style="color:#006699;font-weight:bold;">return</span> (my_sum(<span style="color:#ff6600;">3</span>,size) <span style="color:#555555;">+</span> my_sum(<span style="color:#ff6600;">5</span>,size) <span style="color:#555555;">-</span> my_sum(<span style="color:#ff6600;">15</span>,size))
}

print euler1(<span style="color:#ff6600;">999</span>), <span style="color:#cc3300;">"</span><span style="color:#cc3300;font-weight:bold;">\n</span><span style="color:#cc3300;">"</span>
quit</pre>
</div>

<p></p>
<p>
Your Linux distro probably already has bc installed. Simply add a shebang to the top of your script and execute it:
<p>

<div style="background:black;overflow:auto;width:auto;color:white;margin-bottom:20px;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
<pre style="margin:0;line-height:125%;background:black;border:0px;"><span style="color:#ffffff;">$</span> <span style="color:#ffffff;">./euler1.bc</span>
<span style="color:#0086f7;font-weight:bold;">233168</span>
<span style="color:#ffffff;">$</span></pre>
</div>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/gdm9000">gdm9000</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
